{"version":3,"sources":["Validation.jsx","App.jsx","index.jsx"],"names":["Validation","valid","this","props","className","React","Component","SUPPORTED_CHAINIDS","NETWORK_NAMES","1","4","DISPERSE_CONTRACT_ADDR","DISPERSE_CONTRACT_LINK","href","App","state","ethereum","provider","signer","connectedAccounts","walletStatus","chainId","contract","recipients","parsedRecipients","ids","parsedIds","quantities","parsedQuantities","quantityToggle","contractError","recipientsError","idsError","quantitiesError","txnHash","failureReason","handleChange","bind","handleSubmit","connectWallet","switchNetwork","a","setWalletState","console","log","window","ethers","providers","Web3Provider","getSigner","getNetwork","network","listAccounts","JSON","stringify","length","debug","includes","setState","on","request","method","Error","event","target","id","desiredChainId","params","toString","map","x","match","parse","replace","every","calcQtyFromIds","validateQuantities","qtys","name","value","validateContract","validateRecipients","validateIds","warn","nftContractAddr","error","Contract","ERC1155_ABI","nftContract","ownerAddresses","Array","fill","balanceOfBatch","balances","i","parseInt","err","disperseContractAddr","isApprovedForAll","isApproved","setApprovalForAll","tx","hash","wait","receipt","DISPERSE_ABI","disperseContract","disperse","contractPreview","recipientsPreview","idsPreview","quantitiesPreview","buttonDisabled","quantityValue","quantityDisabled","networkName","connectionStatusMessage","type","onClick","autoComplete","htmlFor","onChange","maxLength","placeholder","checked","disabled","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9ab8f2b6.chunk.js","sourcesContent":["import React from 'react';\n\nclass Validation extends React.Component {\n  render() {\n      const valid = this.props.valid ? \"âœ…\" : \"ðŸ¤”\";\n      return <span className=\"valid\">{ valid }</span>;\n  }\n}\n\nexport default Validation;","import React from 'react';\nimport { ethers } from \"ethers\";\n\nimport './App.css';\nimport Validation from './Validation.jsx';\nimport DISPERSE_ABI from './DisperseNft.abi.json';\nimport ERC1155_ABI from './ERC1155.abi.json';\n\nconst SUPPORTED_CHAINIDS = [1, 4];\nconst NETWORK_NAMES = {1: \"Ethereum Mainnet\", 4: \"Rinkeby Testnet\"};\nconst DISPERSE_CONTRACT_ADDR = {\n  1: \"0xb26e9ff02fc659738c4a2888e0ed58ff0b7c2763\",\n  4: \"0x7b194fBF78eeb62044985d37c9c4cDF6F4f0CA28\",\n}\nconst DISPERSE_CONTRACT_LINK = {\n  1: <a href=\"https://etherscan.io/address/0xb26e9ff02fc659738c4a2888e0ed58ff0b7c2763\">0xb26e9ff02fc659738c4a2888e0ed58ff0b7c2763</a>,\n  4: <a href=\"https://rinkeby.etherscan.io/address/0x7b194fBF78eeb62044985d37c9c4cDF6F4f0CA28\">0x7b194fBF78eeb62044985d37c9c4cDF6F4f0CA28</a>,\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ethereum: null,\n      provider: null,\n      signer: null,\n      connectedAccounts: [],\n      walletStatus: 'no-wallet-detected',\n      chainId: '',\n      contract: '',\n      recipients: '',\n      parsedRecipients: [],\n      ids: '',\n      parsedIds: [],\n      quantities: '',\n      parsedQuantities: [],\n      quantityToggle: 'quantityToggleManual',\n      contractError: 'empty',\n      recipientsError: 'empty',\n      idsError: 'empty',\n      quantitiesError: 'empty',\n      txnHash: '',\n      failureReason: '',\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.connectWallet = this.connectWallet.bind(this);\n    this.switchNetwork = this.switchNetwork.bind(this);\n  }\n\n  async componentDidMount() {\n    await this.setWalletState();\n  }\n\n  async setWalletState() {\n    console.log(\"setWalletState\");\n\n    const { ethereum } = window;\n    let provider = null, signer = null, walletStatus = \"wallet-not-connected\";\n    if (ethereum) {\n      provider = new ethers.providers.Web3Provider(ethereum);\n      signer = provider.getSigner();\n      const network = await provider.getNetwork();\n\n      const connectedAccounts = await provider.listAccounts();\n      console.log(\"connected accounts: \" + JSON.stringify(connectedAccounts));\n\n      if (connectedAccounts.length === 0) {\n        console.debug(\"Setting wallet state: wallet-not-connected\");\n        walletStatus = \"wallet-not-connected\";\n      } else if (!SUPPORTED_CHAINIDS.includes(network.chainId)) {\n        console.debug(\"Setting wallet state: wrong-network\");\n        walletStatus = \"wrong-network\";\n      } else {\n        console.debug(\"Setting wallet state: empty (everything good)\");\n        walletStatus = \"\";\n      }\n\n      this.setState({\n        ethereum: ethereum,\n        provider: provider,\n        signer: signer,\n        chainId: network.chainId,\n        connectedAccounts: connectedAccounts,\n        walletStatus: walletStatus\n      });\n\n      // set up callback for network change\n      ethereum.on(\"chainChanged\", this.setWalletState.bind(this));\n\n      // set up callback for account change\n      ethereum.on(\"accountsChanged\", this.setWalletState.bind(this));\n    }\n  }\n\n  async connectWallet() {\n    await this.state.ethereum.request({\n      method: 'eth_requestAccounts'\n    });\n    const accts = await this.state.provider.listAccounts();\n    if (accts.length > 0) {\n      await this.setWalletState();\n    } else {\n      throw Error(\"Connected to ethereum but provider.listAccounts() returned empty!\");\n    }\n  }\n\n  async switchNetwork(event) {\n    let desiredChainId;\n    switch (event.target.id) {\n      case \"button-ethereum\":\n        desiredChainId = 1;\n        break;\n      case \"button-rinkeby\":\n        desiredChainId = 4;\n        break;\n      default:\n        throw new Error(\"unexpected switch fallthrough for button id \" + event.target.id);\n    }\n\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: \"0x\" + desiredChainId.toString(16) }],\n    });\n\n    this.setWalletState();\n  }\n\n  calcQtyFromIds(parsedIds) {\n    return parsedIds.map(x => \"1\");\n  }\n\n  validateContract(contract) {\n    if (!contract) {\n      this.setState({contractError: \"empty\"});\n    } else if (!contract.match(/^0x[a-fA-F0-9]{40}$/)) {\n      this.setState({contractError: \"Unable to parse contract address\"});\n    } else {\n      this.setState({contractError: \"\"});\n    }\n  }\n\n  validateRecipients(recipients) {\n    this.setState({parsedRecipients: []});\n    if (!recipients) {\n      this.setState({recipientsError: \"empty\"});\n    } else {\n      try {\n        const parsedRecipients = JSON.parse(recipients.replace(/'/g,'\"'));\n\n        const validAddresses = parsedRecipients.every(x => x.match(/^0x[a-fA-F0-9]{40}$/));\n        if (!validAddresses) {\n          this.setState({recipientsError: \"Unable to parse recipient address.\"});\n        } else {\n          this.setState({recipientsError: \"\"});\n          this.setState({parsedRecipients: parsedRecipients});\n        }\n      } catch {\n        this.setState({recipientsError: \"Unable to parse recipients array.\"});\n      }\n    }\n  }\n\n  validateIds(ids) {\n    this.setState({parsedIds: []});\n    if (!ids) {\n      this.setState({idsError: \"empty\"});\n    } else {\n      try {\n        const parsedIds = JSON.parse(ids.replace(/'/g,'\"'));\n\n        if (!parsedIds.every(x => typeof x === \"string\")) {\n          this.setState({idsError: \"Unable to parse ID as string.\"});\n        } else {\n          // success\n          this.setState({idsError: \"\"});\n          this.setState({parsedIds: parsedIds});\n\n          if (this.state.quantityToggle === \"quantityToggleAuto\") {\n            // Updating ID will also update quantities IF the qty toggle is set to Automatic\n            this.setState({parsedQuantities: this.calcQtyFromIds(parsedIds)});\n          } else {\n            // else, re-validate qtys given new ids\n            this.validateQuantities(parsedIds, this.state.quantities);\n          }\n        }\n      } catch {\n        this.setState({idsError: \"Unable to parse IDs array.\"});\n      }\n    }\n  }\n\n  validateQuantities(ids, qtys) {\n    if (this.state.quantityToggle === \"quantityToggleAuto\") {\n      this.setState({quantitiesError: \"\"}); // do nothing; updated during ID validation\n    } else if (!qtys) {\n      this.setState({parsedQuantities: []});\n      this.setState({quantitiesError: \"empty\"});\n    } else {\n      this.setState({parsedQuantities: []});\n      try {\n        const parsedQuantities = JSON.parse(qtys.replace(/'/g,'\"'));\n\n        if (!parsedQuantities.every(x => typeof x === \"string\")) {\n          this.setState({quantitiesError: \"Unable to parse quantity as string.\"});\n        } else if (parsedQuantities.length !== ids.length) {\n          this.setState({quantitiesError: `Invalid length \\\n            (found ${ids.length} IDs, but ${parsedQuantities.length} quantities)`});\n        } else {\n          this.setState({quantitiesError: \"\"});\n          this.setState({parsedQuantities: parsedQuantities});\n        }\n      } catch {\n        this.setState({quantitiesError: \"Unable to parse quantities array.\"});\n      }\n    }\n  }\n\n  handleChange(event) {\n    // Update state\n    this.setState({[event.target.name]: event.target.value});\n\n    // validate newly set state\n    switch (event.target.name) {\n      case \"contract\":\n        this.validateContract(event.target.value);\n        break;\n      case \"recipients\":\n        this.validateRecipients(event.target.value);\n        break;\n      case \"ids\":\n        this.validateIds(event.target.value);\n        break;\n      case \"quantities\":\n        this.validateQuantities(this.state.parsedIds, event.target.value);\n        break;\n      case \"quantityToggle\":\n        if (event.target.value === \"quantityToggleAuto\") {\n          // build quantity dynamically depending on input.\n          this.setState({parsedQuantities: this.calcQtyFromIds(this.state.parsedIds)});\n        }\n        break;\n      default:\n        console.warn(\"unexpected switch fallthrough for event \" + event.target.name);\n    }\n  }\n\n  async handleSubmit() {\n    console.log(\"Dispersing tokens\");\n\n    // Step 1: Check balance\n    // Step 2: Set approval if necessary\n    // Step 3: Disperse\n\n    let nftContractAddr, recipients, ids, quantities;\n    try {\n      nftContractAddr = this.state.contract;\n      recipients = JSON.parse(this.state.recipients);\n      ids = JSON.parse(this.state.ids);\n      if (this.state.quantityToggle === \"quantityToggleAuto\")\n        quantities = this.state.parsedQuantities;\n      else\n        quantities = JSON.parse(this.state.quantities);\n    } catch (err) {\n      console.error(err);\n      this.setState({\n        failureReason: \"Unable to parse parameters\",\n        walletStatus: \"transaction-fail\"\n      });\n      return;\n    }\n\n    console.log(`Ready to commit transaction. Parameters:\n  contract: \\t${JSON.stringify(nftContractAddr)},\n  recipients: \\t${JSON.stringify(recipients)},\n  token ids: \\t${JSON.stringify(ids)},\n  quantities: \\t${JSON.stringify(quantities)},\n  binary data: \\t\"0x\"\n    `);\n\n    let nftContract, balances;\n    try {\n      nftContract = await new ethers.Contract(this.state.contract, ERC1155_ABI, this.state.signer);\n      const ownerAddresses = Array(ids.length).fill(this.state.connectedAccounts[0]);\n      balances = await nftContract.balanceOfBatch(ownerAddresses, ids);\n      console.log(\"balances: \");\n      console.log(balances)\n\n    } catch (err) {\n      console.error(err);\n      this.setState({\n        failureReason: \"Unable to determine contract balance. Did you provide a valid ERC-1155 NFT contract address?\",\n        walletStatus: \"transaction-fail\"\n      });\n      return;\n    }\n\n    for (var i = 0; i < ids.length; i++) {\n      if (quantities[i] > parseInt(balances[i], 16)) {\n        const err = `Insufficient balance for token ID ${ids[i]}. You are trying to send ${quantities[i]}, but have ${balances[i]}.`;\n        console.error(err);\n        this.setState({\n          failureReason: err,\n          walletStatus: \"transaction-fail\"\n        });\n        return;\n      }\n    }\n\n    const disperseContractAddr = DISPERSE_CONTRACT_ADDR[this.state.chainId];\n    if (!disperseContractAddr) {\n      const err = \"No contract address specified for chainId \" + this.state.chainId;\n      console.error(err);\n      this.setState({\n        failureReason: err,\n        walletStatus: \"transaction-fail\"\n      });\n      return;\n    }\n\n    this.setState({walletStatus: \"approve-pending\"});\n\n    let isApproved;\n    try {\n      isApproved = await nftContract.isApprovedForAll(this.state.connectedAccounts[0], disperseContractAddr);\n    } catch (err) {\n      console.error(err);\n      this.setState({\n        failureReason: \"Unable to determine contract approval. Did you provide a valid ERC-1155 NFT contract address?\",\n        walletStatus: \"transaction-fail\"\n      });\n      return;\n    }\n\n    console.log(\"existing approval status: \" + isApproved);\n\n    if (!isApproved) {\n      try {\n        const tx = await nftContract.setApprovalForAll(disperseContractAddr, true);\n        this.setState({\n          txnHash: tx.hash,\n          walletStatus: \"approve-in-progress\"\n        });\n\n        const receipt = await tx.wait();\n        console.log(\"Transaction success. receipt: \");\n        console.log(receipt);\n      } catch (err) {\n        console.error(err);\n        this.setState({\n          failureReason: JSON.stringify(err, null, 2),\n          walletStatus: \"transaction-fail\"\n        });\n        return;\n      }\n    }\n\n    this.setState({walletStatus: \"disperse-pending\"});\n\n    const disperseContract = await new ethers.Contract(disperseContractAddr, DISPERSE_ABI, this.state.signer);\n    try {\n      const tx = await disperseContract.disperse(\n        nftContractAddr,\n        recipients,\n        ids,\n        quantities,\n        \"0x\"\n      );\n\n      this.setState({\n        txnHash: tx.hash,\n        walletStatus: \"disperse-in-progress\"\n      });\n\n      const receipt = await tx.wait();\n      console.log(\"Transaction success. receipt: \");\n      console.log(receipt);\n      this.setState({walletStatus: \"disperse-success\"});\n    } catch (err) {\n      console.error(err);\n      this.setState({\n        failureReason: JSON.stringify(err, null, 2),\n        walletStatus: \"transaction-fail\"\n      });\n    }\n  }\n\n  render() {\n    let contractPreview, recipientsPreview, idsPreview, quantitiesPreview;\n\n    if (this.state.contractError) {\n      contractPreview = <i>{this.state.contractError}</i>;\n    } else {\n      contractPreview = this.state.contract;\n    }\n\n    if (this.state.recipientsError) {\n      recipientsPreview = <i>{this.state.recipientsError}</i>;\n    } else {\n      if (this.state.parsedRecipients.length === 1) {\n        recipientsPreview = \"1 recipient\";\n      } else {\n        recipientsPreview = `${this.state.parsedRecipients.length} recipients`;\n      }\n    }\n\n    if (this.state.idsError) {\n      idsPreview = <i>{this.state.idsError}</i>;\n    } else {\n      if (this.state.parsedIds.length === 1) {\n        idsPreview = \"1 id\";\n      } else {\n        idsPreview = `${this.state.parsedIds.length} ids`;\n      }\n    }\n\n    if (this.state.quantityToggle === 'quantityToggleAuto') {\n      quantitiesPreview = \"1 of each ID, for each recipient\";\n    } else {\n      if (this.state.quantitiesError) {\n        quantitiesPreview = <i>{this.state.quantitiesError}</i>;\n      } else {\n        quantitiesPreview = this.state.quantities;\n        if (this.state.parsedQuantities.length === 1) {\n          quantitiesPreview = \"1 quantity\";\n        } else {\n          quantitiesPreview = `${this.state.parsedQuantities.length} quantities`;\n        }\n      }\n    }\n\n    const buttonDisabled = this.state.contractError\n      || this.state.recipientsError\n      || this.state.idsError\n      || (this.state.quantitiesError && this.state.quantityToggle === 'quantityToggleManual');\n\n    // Set quantity value dynamically, depending on manual/auto selection\n    let quantityValue = this.state.quantities;\n    let quantityDisabled = false;\n    if (this.state.quantityToggle === \"quantityToggleAuto\") {\n      quantityValue = JSON.stringify(this.state.parsedQuantities);\n      quantityDisabled = true;\n    }\n\n    const networkName = NETWORK_NAMES[this.state.chainId] ? NETWORK_NAMES[this.state.chainId] : \"unsupported network\";\n    const connectionStatusMessage = (this.state.connectedAccounts.length > 0 && this.state.provider) ? <p>Wallet connected to {networkName}.</p> : null;\n\n    return <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Disperse NFT</h1>\n        <h2>Batch-send your ERC1155 tokens to one or more recipients.</h2>\n        <p>\n          This tool allows you to send many ERC-1155 NFTs in a single transaction. This only works for NFTs that support multiple <i>copies</i> of the same NFT, such as Rarible multiples, or Curio Cards.\n        </p>\n        <p>\n          <span>Source: <a href=\"https://github.com/fafrd/disperse-nft-contract\">github.com/fafrd/disperse-nft-contract</a></span><br />\n          <span className={SUPPORTED_CHAINIDS.includes(this.state.chainId) ? \"\" : \"hidden\"}>Contract: {DISPERSE_CONTRACT_LINK[this.state.chainId]}</span>\n        </p>\n      </header>\n\n      <main className={this.state.walletStatus === \"no-wallet-detected\" ? \"\" : \"hidden\"}>\n        <h3>No wallet detected. Install metamask: <a href=\"https://metamask.io/\">metamask.io</a></h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"wallet-not-connected\" ? \"\" : \"hidden\"}>\n        <h3>Connect your wallet to continue: <button id=\"connect\" type=\"button\" onClick={this.connectWallet}>Connect Wallet</button></h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"wrong-network\" ? \"\" : \"hidden\"}>\n        <h3>Switch to a supported network to continue: </h3>\n        <ul>\n          <li><h3><button className=\"switchNetwork\" id=\"button-ethereum\" type=\"button\" onClick={this.switchNetwork}>Ethereum</button></h3></li>\n          <li><h3><button className=\"switchNetwork\" id=\"button-rinkeby\" type=\"button\" onClick={this.switchNetwork}>Rinkeby testnet</button></h3></li>\n        </ul>\n      </main>\n\n      <main className={this.state.walletStatus === \"approve-pending\" ? \"\" : \"hidden\"}>\n        <h3>Sign transaction to approve NFT dispersal...</h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"approve-in-progress\" ? \"\" : \"hidden\"}>\n        <h3>Approval transaction in progress. Tx hash: {this.state.txnHash}</h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"disperse-pending\" ? \"\" : \"hidden\"}>\n        <h3>Sign transaction to disperse NFT...</h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"disperse-in-progress\" ? \"\" : \"hidden\"}>\n        <h3>Disperse tranasction in progress. Tx hash: {this.state.txnHash}</h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"disperse-success\" ? \"\" : \"hidden\"}>\n        <h3>NFT dispersal complete! Tx hash: {this.state.txnHash}</h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"transaction-fail\" ? \"\" : \"hidden\"}>\n        <h3>NFT dispersal failed!</h3>\n        <p><code>{this.state.failureReason}</code></p>\n        <h3><button id=\"reset\" type=\"button\" onClick={() => this.setState({walletStatus: \"\"})}>Reset</button></h3>\n      </main>\n\n      <main className={this.state.walletStatus === \"\" ? \"\" : \"hidden\"}>\n        <form autoComplete=\"off\">\n          <label htmlFor=\"contract\">NFT contract <i>(address)</i></label>\n          <div className=\"input-wrapper\">\n            <input type=\"text\" name=\"contract\" value={this.state.contract} autoComplete=\"off\" onChange={this.handleChange} maxLength=\"42\" placeholder=\"i.e. 0x73DA73EF3a6982109c4d5BDb0dB9dd3E3783f313\" />\n          </div>\n\n          <label htmlFor=\"recipients\">Recipients <i>(array of addresses, as strings)</i></label>\n          <div className=\"input-wrapper\">\n            <input type=\"text\" name=\"recipients\" value={this.state.recipients} autoComplete=\"off\" onChange={this.handleChange} placeholder='i.e. [\"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\", \"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\", ...]' />\n          </div>\n\n          <label htmlFor=\"ids\">IDs <i>(array of NFT IDs, sorted, as strings)</i></label>\n          <div className=\"input-wrapper\">\n            <input type=\"text\" name=\"ids\" value={this.state.ids} autoComplete=\"off\" onChange={this.handleChange} placeholder='i.e. [\"21\", \"22\", \"23\"]' />\n          </div>\n\n          <label htmlFor=\"quantities\">Quantities <i>(array of quantities, order corresponding to IDs, as strings)</i></label>\n\n          <div className=\"input-radio-wrapper\">\n            <div className=\"input-radio-wrapper-item\">\n              <input type=\"radio\" id=\"quantityToggleManual\" name=\"quantityToggle\" value=\"quantityToggleManual\" onChange={this.handleChange} checked={this.state.quantityToggle === \"quantityToggleManual\"} />\n              <label htmlFor=\"quantityToggleManual\">Manual selection</label>\n            </div>\n            <div className=\"input-radio-wrapper-item\">\n              <input type=\"radio\" id=\"quantityToggleAuto\" name=\"quantityToggle\" value=\"quantityToggleAuto\" onChange={this.handleChange} checked={this.state.quantityToggle === \"quantityToggleAuto\"} />\n              <label htmlFor=\"quantityToggleAuto\">Automatic selection (1 of each ID, for each recipient)</label>\n            </div>\n          </div>\n\n          <div className=\"input-wrapper quantity-input\">\n            <input type=\"text\" name=\"quantities\" value={quantityValue} disabled={quantityDisabled} autoComplete=\"off\" onChange={this.handleChange} placeholder='i.e. [\"1\", \"2\", \"1\"]' />\n          </div>\n\n        </form>\n\n        {connectionStatusMessage}\n        <p>Contract: {contractPreview} <Validation valid={!this.state.contractError} /></p>\n        <p>Recipients: {recipientsPreview} <Validation valid={!this.state.recipientsError} /></p>\n        <p>NFT IDs: {idsPreview} <Validation valid={!this.state.idsError} /></p>\n        <p>Quantities: {quantitiesPreview} <Validation valid={this.state.quantityToggle === \"quantityToggleAuto\" || !this.state.quantitiesError} /></p>\n\n        <div className=\"button-container\">\n          <button id=\"disperse\" type=\"button\" disabled={buttonDisabled} onClick={this.handleSubmit}>Disperse</button>\n        </div>\n\n      </main>\n\n    </div>;\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}